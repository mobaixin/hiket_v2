<!--index.wxml-->
<!--<import src="../../template/index_sections/index_sections.wxml"/>-->
<import src="../../template/img_col/img_col.wxml"/>

<view class="page" style="background-color: white">

    <view class='page_row'>
        <view class="search">
            <view class="search_arr">
                <icon class="search_icon" size='20' type='search'></icon>
                <input confirm-type="search" bindconfirm="bindSearch" class=""
                       placeholder="请输入关键字" value="{{searchValue}}"
                       bindinput='searchValueInput'/>
            </view>
        </view>
    </view>

    <view class='tab'>
        <scroll-view scroll-x="true" class="tab-scroll">
            <view class="tab-item {{currentTab==-1?'active':''}}"
                  data-current="-1" bindtap="bindTab">首页
            </view>
            <view wx:for="{{sections}}" class="tab-item {{currentTab==index?'active':''}}" data-current="{{index}}" bindtap="bindTab">{{item}}</view>
        </scroll-view>
    </view>

    <swiper wx:if="{{currentTab==-1}}" class="swiper" indicator-dots="true"
            autoplay="true" interval="3000" duration="1000">
        <block wx:for="{{topBanner}}">
            <swiper-item>
                <image src="{{item}}" style="position:absolute;z-index:1"
                       mode="aspectFill" class="slide-image"/>
            </swiper-item>
        </block>
    </swiper>

    <view wx:else>
        <view style="display: flex;justify-content:space-around;margin: 10rpx 0">
            <view wx:for="{{sectionTags[currentTab]}}" wx:if="{{index<4}}" style="width: 120rpx;height: 160rpx;display: flex;flex-direction:column">
                <image style="width: 120rpx;height: 120rpx" src="{{'../../images/index/tag/'+item+'.jpg'}}"
                       mode="scaleToFill"/>
                <text style="width: 120rpx;color: darkgray;text-align: center">{{item}}</text>
            </view>
        </view>
        <view style="display: flex;justify-content:space-around;margin: 10rpx 0">
            <view wx:for="{{sectionTags[currentTab]}}" wx:if="{{index>3}}" style="width: 120rpx;height: 160rpx;display: flex;flex-direction:column">
                <image style="width: 120rpx;height: 120rpx" src="{{'../../images/index/tag/'+item+'.jpg'}}"
                       mode="scaleToFill"/>
                <text style="width: 120rpx;color: darkgray;text-align: center">{{item}}</text>
            </view>
        </view>
    </view>

    <!--两栏展示商品-->
    <template is="img_col" data="{{col1,col2,Loading}}"></template>
    <!--两栏展示商品-->

        <view bindtap='bindRecommend' class="recommend">
            <text class="recommend_text">今日推荐</text>
            <view class="mine_arrow"></view>
            <view class="mine_arrow" style='margin-right:40rpx'></view>
        </view>
    <tabbar tabbar="{{tabbar}}"></tabbar>
</view>
<modal title="提示" hidden="{{modalHidden}}" confirm-text="前往认证"
       cancel-text="暂不认证" bindconfirm="modalBindConfirm"
       bindcancel="modalBindCancel">
    <view wx:if="{{!hasUserInfo}}">
        <text>检测到你未进行微信认证</text>
    </view>
    <view wx:elif="{{!hasStudentInfo}}">
        <text>检测到你未进行学生认证</text>
    </view>
</modal>
